<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timer</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>

<body>
    <section id="pomodoro">
        <audio loop id="play" src="http://www.soundjay.com/button/beep-07.wav"></audio>
        <div class="display">
            <div class="me-3">
                <label for="session"></label>
                <input class="session" id="hou" type="number" placeholder="HH">
                <label for="session"></label>
                <input class="session" id="min" type="number" placeholder="MM">
                <label for="session"></label>
                <input class="session" id="sec" type="number" placeholder="SS">
            </div>
            <h3 id="time"> 00 : 00 : 00</h3>
        </div>
    </section>
    <div class="d-flex align-items-center justify-content-center gap-3 mt-3">
        <button class="btn btn-success p-2 " id="start">Start</button>
        <button class="btn btn-success p-2 " id="reset">Reset</button>
        <button class="btn btn-success p-2 " id="pause">Pause</button>
    </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    let timer;
    let time = document.getElementById("time")
    let totalSecond = 0;
    let runningState = false;

    document.getElementById("start").addEventListener("click", function () {
        if (runningState == true) {
            return
        }
        startTimer();
        setTimeout(() => {
            clearall()
        }, 1000)
    })
    function startTimer() {
        let h = parseInt(document.getElementById("hou").value) || 0;
        let m = parseInt(document.getElementById("min").value) || 0;
        let s = parseInt(document.getElementById("sec").value) || 0;

        totalSecond = (h * 3600) + (m * 60) + s;
        if (totalSecond <= 0) {
            Swal.fire({
                text: "Invalid Input",
                icon: "error"
            });
        } else {
            timer = setInterval(() => {
                runningState = true
                if (totalSecond == -1) {
                    clearInterval(timer)
                }
                else {
                    displayTimer()

                    totalSecond--;
                }
            }, 1000)
        }
    }
    function displayTimer() {
        let hours = Math.floor(totalSecond / 3600);
        let minuts = Math.floor((totalSecond % 3600) / 60);
        let seconds = totalSecond % 60
        time.innerHTML = `${hours.toString().padStart(2, 0)} : ${minuts.toString().padStart(2, 0)} : ${seconds.toString().padStart(2, 0)}`
    }
    function clearall() {
        document.getElementById("hou").value = ""
        document.getElementById("min").value = ""
        document.getElementById("sec").value = ""
    }
    document.getElementById("reset").addEventListener("click", function () {
        clearInterval(timer);
        runningState = false;
        totalSecond = 0;
        document.getElementById("time").innerHTML = "00 : 00 : 00";
    });
    document.getElementById("pause").addEventListener("click", function () {
        clearInterval(timer);
        runningState = false;
    });




</script>

</html>